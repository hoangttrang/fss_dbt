version: 2

# This is used to documentation on the database and the schema 
models: 
  - name: stg_sage_ap_bill
    description: This table stores invoice per vendor with the most up-to-date information. It tracks if an invoice is deleted. doesn't track invoice status changes
    tests:
      - dbt_utils.unique_combination_of_columns: 
          combination_of_columns:
            - invoice_num 
            - vendor_id
            - record_num  

  - name: stg_sage_ap_bill_item
    description: This table stores invoice line items per vendor with the most up-to-date information. It tracks if an invoice is deleted. doesn't track invoice status changes
    columns: 
      - name: state
        description: State of the invoice. V= voided- refund , S = submitted, U = unapproved, usually associated with Declined status, D= Deleted, A = Approved 
    tests: 
      - dbt_utils.unique_combination_of_columns: 
          combination_of_columns:
            - record_num
            - invoice_num 
            - vendor_id 
            - line_no
  - name: stg_sage_gl_detail
    description: This table stores the general ledger detail information. It tracks if a record is deleted. It doesn't track status changes.
    tests:
      - dbt_utils.unique_combination_of_columns:
          combination_of_columns:
            - recordno
            - departmentid
  - name: gl_budget_item
    description: This table stores the general ledger budget item information.This contains monthly budget amounts